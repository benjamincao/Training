ORTHOGONALITY
==============================================
- [1. 什么是正交性]()
- [2. 非正交系统的样子]()
- [3. 正交系统的好处]()
    + [3.1 提高生产率]()
    + [3.2 风险降低]()
- [4. 如何保证正交性？]()
    + [4.1 团队的正交性]()
    + [4.2 设计的正交性]()
    + [4.3 工具箱与库的正交性]()
    + [4.4 编码的正交性]()
    + [4.5 测试的正交性]()
    + [4.6 文档的正交性]()
- [5. 认同正交性]()


### 1. 什么是正交性
如果我们要制作易于设计、构建、测试以及扩展的系统，正交性十个十分关键的概念。一旦学会了直接应用正交性原则，我们将会发现，我们编码的系统质量 **立刻** 得到了提高。    
“正交性”是几何学的术语，两条直线相交成直角，则它们就是正交的。用向量术语说，这两条直线是 **互不依赖** 的，沿着一条直线移动，在另一条直线上的投影不变。    
在计算技术中，借用该术语表示不相依赖性或者说是解耦性。如果两个或者多个模块（类）中的某个发生变化，并不会影响到其他模块（类），那么这些模块（类）就是正交的。一般来说，数据库代码与用户界面代码应该是正交的。    


### 2. 非正交系统的样子
据说直升机的各个控制器不是正交的，所有的控制输入都有次级效应。如果要让在降落的直升机保持稳定，你需要压低左手操作杆，需要补偿性的向后移动右手柄，并踩右踏板。但同时这些改变中的每一项都会再次影响所有其他输入。这样看来，这个系统的每一项输入都会影响所有其他的输入，驾驶员工作负担异常巨大，必须不停的移动，才有可能平衡所有交互影响的力量。

### 3. 正交系统的好处
正如直升机的例子，非正交系统的改变与控制更加复杂是其固有的性质。当系统的各组件相互依赖时，就不再具有局部修正这样的事情了。  
我们要设计self-contained的组件，组件独立，具有单一、定义良好的目的。只要模块接口不变，那么无论修改内部实现，不会造成 **整个**　系统的问题。编写正交的系统，主要有两个好处：生产率提高和风险降低。


#### 3.1 提高生产率
* 改动得以局部化，开发时间和测试时间得以降低。对任何组件的修改，不会影响到整个系统，小的组件也方便单元测试。增加新的代码，也不需要改动已有的代码。
* 促进复用。功能单一，目的明确，接口良好的组件，可以用在系统的任何地方，甚至是最初开发者没有想象过的地方。
* 组合正交的组件，生产率会有提高。假如某个组件有M个接口，另一个组件有N个接口，如果他们是正交的，那么组合起来可以有M X N中可能。


#### 3.2 风险降低
* 正交的途径能降低任何开发中固有的风向。
* 有问题的代码被隔离开。如果某个模块有毛病，不大可能把毛病扩散到系统的其余部分，对bug的修正也更容易。
* 系统更健壮。对特定区域作出的修改所导致的任何问题，被局限在该区域。
* 正交的系统更好测试。
不会与特定供应商、产品或者是平台绑定在一起，因为第三方组件被隔离在系统的较小部分。


### 4. 如何保证正交性？

#### 4.1 团队的正交性
正交的团队中，每个人都知道要做什么，并全力作出贡献，非正交团队中，组织有许多重叠，成员对责任感到困惑，无法避免互相妨碍，任何改动都需要整个团队开会，因为无法确认谁会受到影响，甚至每个人都会受到影响。一个非正式的衡量团队的正交性的方法，就是看在讨论改动时，需要涉及的人数，人数越多，正交性越差。

#### 4.2 设计的正交性
系统应该由一组相互协作的模块组成，每个模块实现不依赖于其他模块的功能。将模块分层，是设计正交系统的强大方式，每一层提供一层抽象，相互之间通过定义良好的接口来调用，改动时，不会影响其余的代码。     
衡量设计正交性的一个简单的测试方法为，问问自己，如果显著的更改了某个特定功能背后的需求，有多少模块会受到影响？还要问问自己，设计在多大程度上解除了与现实世界中的变化的耦合？尽量不要依赖你无法控制的事情。   


#### 4.3 工具箱与库的正交性
不可避免的需要引入第三方的库，这时候需要考虑这些库的正交性，是否引入这些库，需要对代码进行不必要的改动。面向方面编程是正交性的一个有趣的变体。


#### 4.4 编码的正交性
* 让代码保持解耦。不要没有必要的向其他模块暴露任何事情，不依赖于使用其他模块的实现的模块。另外，如果需要改变对象的状态，让这个对象替你去做。（成员的private等）
* 避免使用全局变量。当你的代码使用全局变量时，就不可避免的把自己与共享该数据的其他组件绑定在一起。一般来说，采用把所需的上下文显式的传入模块的方法，代码就会易于理解和维护。在面向对象的设计中，一般将上下文作为参数传递给对象的构造器。    
* 避免编写相似的函数。相似的函数意味着共享了某些代码，除此之外的其余各不相同，那么这些共享的代码不可避免的相互纠结。


#### 4.5 测试的正交性
正交的系统更易于测试。因为系统各组件间的交互是形式化的和有限的，更多的系统测试可以在单个模块进行。   
构建单元测试本身是对正交性的一项有趣测试，如果要进行某个测试需要牵扯进系统的很大一部分内容，那么这部分代码很有可能是不正交的，这个模块也是很有可能跟其余部分耦合的。    



#### 4.6 文档的正交性
文档也有正交性。坐标轴是内容和表现形式。对于真正正交的文档，你可以显著的改变外观，而不是改变内容。  



### 5. 认同正交性
运用DRY原则，使系统的重复降至最小，而运用正交性原则，可以降低系统各组件之间的相互依赖。在设计和编码过程中，仅仅拥抱DRY和正交原则，我们开发的系统会变得更为灵活，更易于理解，也更易于调试，测试和维护。如果对一个系统的任何修改都可能引起整个项目组的慌乱，那么是我们的项目该开始重构的时候了。



